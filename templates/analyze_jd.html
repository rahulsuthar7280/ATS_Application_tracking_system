{% extends 'base.html' %}

{% block title %}Job Description Details - {{ jd.title }}{% endblock %}
{% block page_heading %}Job Description Details{% endblock %}

{% block content %}
<div class="content-wrapper d-flex justify-content-center align-items-center min-vh-100 py-5">
    {# Use a fluid container to allow content to span more width #}
    <div class="container-fluid">
        <div class="card p-5 shadow-lg custom-card mx-auto" style="max-width: 1200px; width: 100%;">
            <h1 class="page-heading text-center mb-2">{{ jd.title }}</h1>
            <p class="text-center text-muted mb-4">Uploaded at: {{ jd.uploaded_at|date:"F j, Y, P" }}</p>

            <div class="row mb-4 border-bottom pb-4">
                <div class="col-md-6">
                    <p class="mb-2"><strong>Job Level:</strong> 
                        <span class="text-secondary-emphasis">{{ jd.get_job_level_display|default:"N/A" }}</span>
                    </p>
                    <p class="mb-2"><strong>Department:</strong> 
                        <span class="text-secondary-emphasis">{{ jd.department|default:"N/A" }}</span>
                    </p>
                    <p class="mb-2"><strong>Location:</strong> 
                        <span class="text-secondary-emphasis">{{ jd.location|default:"N/A" }}</span>
                    </p>
                    <p class="mb-0"><strong>Employment Type:</strong> 
                        <span class="text-secondary-emphasis">{{ jd.get_employment_type_display|default:"N/A" }}</span>
                    </p>
                </div>
                <div class="col-md-6 text-end d-flex flex-column justify-content-end align-items-end">
                    {% if jd.file %}
                        <p class="mb-2"><strong>Associated File:</strong></p>
                        <a href="{{ jd.file.url }}" target="_blank" class="btn enhanced-btn btn-view-file">
                            <i class="fas fa-file-alt me-1"></i> View Original File
                        </a>
                    {% else %}
                        <p class="mb-0 text-muted fst-italic">No original file (created from text input)</p>
                    {% endif %}
                </div>
            </div>

            {% if jd.overview %}
            <div class="card bg-light p-4 mb-4 shadow-sm">
                <h4 class="text-primary mb-3"><i class="fas fa-info-circle me-2"></i>Job Overview</h4>
                <p class="text-secondary-emphasis">{{ jd.overview|linebreaksbr }}</p>
            </div>
            {% else %}
            <div class="card bg-light p-4 mb-4 shadow-sm">
                <h4 class="text-primary mb-3"><i class="fas fa-info-circle me-2"></i>Job Overview</h4>
                <p class="text-muted fst-italic">No overview provided.</p>
            </div>
            {% endif %}

            {% if jd.responsibilities %}
            <div class="card bg-light p-4 mb-4 shadow-sm">
                <h4 class="text-primary mb-3"><i class="fas fa-tasks me-2"></i>Key Responsibilities</h4>
                <p class="text-secondary-emphasis">{{ jd.responsibilities|linebreaksbr }}</p>
            </div>
            {% else %}
            <div class="card bg-light p-4 mb-4 shadow-sm">
                <h4 class="text-primary mb-3"><i class="fas fa-tasks me-2"></i>Key Responsibilities</h4>
                <p class="text-muted fst-italic">No responsibilities listed.</p>
            </div>
            {% endif %}

            {% if jd.required_skills %}
            <div class="card bg-light p-4 mb-4 shadow-sm">
                <h4 class="text-primary mb-3"><i class="fas fa-star me-2"></i>Required Skills & Qualifications</h4>
                <p class="text-secondary-emphasis">{{ jd.required_skills|linebreaksbr }}</p>
            </div>
            {% else %}
            <div class="card bg-light p-4 mb-4 shadow-sm">
                <h4 class="text-primary mb-3"><i class="fas fa-star me-2"></i>Required Skills & Qualifications</h4>
                <p class="text-muted fst-italic">No required skills specified.</p>
            </div>
            {% endif %}

            {% if jd.preferred_skills %}
            <div class="card bg-light p-4 mb-4 shadow-sm">
                <h4 class="text-primary mb-3"><i class="fas fa-thumbs-up me-2"></i>Preferred Skills</h4>
                <p class="text-secondary-emphasis">{{ jd.preferred_skills|linebreaksbr }}</p>
            </div>
            {% else %}
            <div class="card bg-light p-4 mb-4 shadow-sm">
                <h4 class="text-primary mb-3"><i class="fas fa-thumbs-up me-2"></i>Preferred Skills</h4>
                <p class="text-muted fst-italic">No preferred skills specified.</p>
            </div>
            {% endif %}

            {% if jd.education_experience %}
            <div class="card bg-light p-4 mb-4 shadow-sm">
                <h4 class="text-primary mb-3"><i class="fas fa-graduation-cap me-2"></i>Education & Experience</h4>
                <p class="text-secondary-emphasis">{{ jd.education_experience|linebreaksbr }}</p>
            </div>
            {% else %}
            <div class="card bg-light p-4 mb-4 shadow-sm">
                <h4 class="text-primary mb-3"><i class="fas fa-graduation-cap me-2"></i>Education & Experience</h4>
                <p class="text-muted fst-italic">No education or experience details provided.</p>
            </div>
            {% endif %}

            {% if jd.benefits %}
            <div class="card bg-light p-4 mb-4 shadow-sm">
                <h4 class="text-primary mb-3"><i class="fas fa-gift me-2"></i>Benefits & Perks</h4>
                <p class="text-secondary-emphasis">{{ jd.benefits|linebreaksbr }}</p>
            </div>
            {% else %}
            <div class="card bg-light p-4 mb-4 shadow-sm">
                <h4 class="text-primary mb-3"><i class="fas fa-gift me-2"></i>Benefits & Perks</h4>
                <p class="text-muted fst-italic">No benefits or perks listed.</p>
            </div>
            {% endif %}

            <hr class="my-5">

            <div class="d-grid gap-2">
                <a href="{% url 'all_job_descriptions' %}" class="btn btn-secondary universal-btn">
                    <i class="fas fa-arrow-left me-2"></i>Back to All JDs
                </a>
                {# You can add more buttons here, e.g., for editing the JD #}
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
    body {
        font-family: 'Inter', sans-serif;
        background-color: #f8f9fa;
        color: #343a40;
    }
    .page-heading {
        font-size: 2.5rem;
        color: #0069d9;
        font-weight: 700;
    }
    .custom-card {
        border-radius: 1rem;
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        background-color: white;
    }
    .text-primary {
        color: #007bff !important;
    }
    .text-secondary-emphasis {
        color: #495057 !important;
    }
    .enhanced-btn {
        border: none;
        border-radius: 0.5rem;
        font-weight: 600;
        padding: 0.5rem 1.25rem;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
    }
    .enhanced-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 7px 14px rgba(0, 0, 0, 0.1), 0 3px 6px rgba(0, 0, 0, 0.08);
    }
    .btn-view-file { /* Renamed for clarity */
        background: linear-gradient(45deg, #28a745, #218838); /* Greenish for view file */
        color: white;
        border: none;
    }
    .btn-view-file:hover {
        background: linear-gradient(45deg, #218838, #1e7e34);
        color: white;
    }
    .universal-btn {
        font-weight: 600;
        border-radius: 0.5rem;
        padding: 0.75rem 1.5rem;
    }
</style>
{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
